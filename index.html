<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word Combiner (‡∏´‡∏•‡∏≤‡∏¢ Prefix + Toggle Strike)</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #f4f7f6; margin:0; padding:20px;
  display:grid; place-items:center; min-height:90vh;
}
.container {
  width:100%; max-width:680px;
  background:white; padding:25px;
  border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05);
}
h2 { text-align:center; color:#333; margin-top:0; }

.form-group { margin-bottom:20px; }
label { display:block; margin-bottom:6px; font-weight:600; color:#555; }

input[type="text"], select {
  width:100%; padding:14px;
  border:1px solid #ccc; border-radius:8px;
  font-size:16px; box-sizing:border-box;
}
.button-row { display:flex; gap:10px; flex-wrap:wrap; margin-top:8px; }
button {
  flex:1; padding:12px; border:none;
  border-radius:6px; font-size:15px;
  font-weight:600; cursor:pointer; transition:0.2s;
}
button:hover { opacity:0.9; }

#generateButton { background-color:#007bff; color:white; }
#clearButton { background-color:#dc3545; color:white; }
.small-btn { background-color:#ffc107; color:#333; flex:0.4; }
#combineButton { background:#28a745; color:white; }
#copyAllButton { background:#17a2b8; color:white; margin-top:5px; }
#toggleInputsBtn { background:#6f42c1; color:white; margin-bottom:10px; }
#togglePrefixGroupBtn { background:#20c997; color:white; margin-bottom:10px; }
#addPrefixBtn { background:#198754; color:white; flex:1; }
#deletePrefixBtn { background:#dc3545; color:white; flex:0.4; }

hr { border:none; border-top:1px solid #eee; margin:20px 0; }

#outputContainer {
  margin-top:15px; border:1px solid #e0e0e0;
  border-radius:6px; max-height:300px; overflow-y:auto;
}

.result-item {
  display:flex; align-items:center;
  padding:10px 12px; border-bottom:1px solid #f0f0f0;
}
.result-item:last-child { border-bottom:none; }
.result-item input[type="checkbox"] {
  margin-right:12px; transform:scale(1.2); cursor:pointer;
}
.result-index { width:30px; text-align:right; margin-right:10px; font-weight:bold; color:#666; }
.result-text {
  flex-grow:1; font-family:Consolas, monospace;
  font-size:15px; color:#333; cursor:pointer; user-select:none;
}
.result-text.strike { text-decoration: line-through; color:#999; }

.copy-button {
  padding:5px 10px; font-size:12px;
  background:#6c757d; color:white;
  border:none; border-radius:5px; cursor:pointer;
  margin-left:10px;
}

.feedback {
  display:none; position:fixed; bottom:20px; left:50%;
  transform:translateX(-50%);
  background:#333; color:white;
  padding:10px 20px; border-radius:6px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  font-weight:500; z-index:1000;
}
#combinedArea {
  width:100%; height:100px; margin-top:15px;
  font-size:15px; padding:10px; border-radius:8px;
  border:1px solid #ccc; resize:none;
}
</style>
</head>
<body>
<div class="container">

<h2>Word Combiner (‡∏´‡∏•‡∏≤‡∏¢ Prefix + Toggle Strike)</h2>

<button id="toggleInputsBtn">‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

<div id="inputsContainer">

  <button id="togglePrefixGroupBtn">‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Prefix</button>
  <div id="prefixGroup" class="form-group">
      <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Prefix:</label>
      <select id="prefixSelect"></select>

      <div class="button-row">
          <input type="text" id="prefixLabel" placeholder="‡∏ä‡∏∑‡πà‡∏≠ prefix ‡πÄ‡∏ä‡πà‡∏ô 'SKU ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô'">
          <input type="text" id="prefixValue" placeholder="‡∏Ñ‡πà‡∏≤ prefix ‡πÄ‡∏ä‡πà‡∏ô SKU_JP_">
      </div>

      <div class="button-row">
          <button id="addPrefixBtn">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏° Prefix</button>
          <button id="deletePrefixBtn">üóëÔ∏è ‡∏•‡∏ö Prefix</button>
      </div>
  </div>

  <div class="form-group">
      <label>‡∏Ñ‡∏≥‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ ,):</label>
      <div class="button-row">
          <input type="text" id="suffixInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 001,002,003,ABC">
          <button class="small-btn" id="clearSuffix">‡∏•‡πâ‡∏≤‡∏á</button>
      </div>
  </div>

  <div class="button-row">
      <button id="generateButton">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</button>
      <button id="clearButton">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  </div>
</div>

<hr>

<h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</h3>
<div id="outputContainer"></div>

<button id="combineButton">‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</button>
<textarea id="combinedArea" placeholder="‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß..." readonly></textarea>
<button id="copyAllButton">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

</div>

<div id="copyFeedback" class="feedback">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!</div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
    const prefixSelect = document.getElementById('prefixSelect');
    const prefixLabel = document.getElementById('prefixLabel');
    const prefixValue = document.getElementById('prefixValue');
    const suffixInput = document.getElementById('suffixInput');
    const addPrefixBtn = document.getElementById('addPrefixBtn');
    const deletePrefixBtn = document.getElementById('deletePrefixBtn');
    const clearSuffix = document.getElementById('clearSuffix');
    const generateButton = document.getElementById('generateButton');
    const clearButton = document.getElementById('clearButton');
    const combineButton = document.getElementById('combineButton');
    const copyAllButton = document.getElementById('copyAllButton');
    const combinedArea = document.getElementById('combinedArea');
    const outputContainer = document.getElementById('outputContainer');
    const copyFeedback = document.getElementById('copyFeedback');
    const toggleInputsBtn = document.getElementById('toggleInputsBtn');
    const togglePrefixGroupBtn = document.getElementById('togglePrefixGroupBtn');
    const prefixGroup = document.getElementById('prefixGroup');
    const inputsContainer = document.getElementById('inputsContainer');
    let feedbackTimeout;

    toggleInputsBtn.addEventListener('click', ()=>{
        inputsContainer.style.display = inputsContainer.style.display === 'none' ? 'block' : 'none';
    });

    togglePrefixGroupBtn.addEventListener('click', ()=>{
        prefixGroup.style.display = prefixGroup.style.display === 'none' ? 'block' : 'none';
    });

    function loadPrefixes(){
        const saved = JSON.parse(localStorage.getItem('prefixList') || '{}');
        prefixSelect.innerHTML = '';
        Object.keys(saved).forEach(label=>{
            const opt = document.createElement('option');
            opt.value = label;
            opt.textContent = label;
            prefixSelect.appendChild(opt);
        });
        if(Object.keys(saved).length>0){
            const firstLabel = prefixSelect.value || Object.keys(saved)[0];
            prefixSelect.value = firstLabel;
            prefixLabel.value = firstLabel;
            prefixValue.value = saved[firstLabel];
        }
    }

    loadPrefixes();

    prefixSelect.addEventListener('change', ()=>{
        const list = JSON.parse(localStorage.getItem('prefixList')||'{}');
        const selected = prefixSelect.value;
        prefixLabel.value = selected;
        prefixValue.value = list[selected] || '';
    });

    addPrefixBtn.addEventListener('click', ()=>{
        const label = prefixLabel.value.trim();
        const value = prefixValue.value.trim();
        if(!label || !value){ showFeedback('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ prefix'); return; }
        const list = JSON.parse(localStorage.getItem('prefixList')||'{}');
        list[label] = value;
        localStorage.setItem('prefixList', JSON.stringify(list));
        loadPrefixes();
        showFeedback('‡πÄ‡∏û‡∏¥‡πà‡∏° Prefix ‡πÅ‡∏•‡πâ‡∏ß');
    });

    deletePrefixBtn.addEventListener('click', ()=>{
        const label = prefixSelect.value;
        if(!label) return;
        const list = JSON.parse(localStorage.getItem('prefixList')||'{}');
        delete list[label];
        localStorage.setItem('prefixList', JSON.stringify(list));
        loadPrefixes();
        showFeedback('‡∏•‡∏ö Prefix ‡πÅ‡∏•‡πâ‡∏ß');
    });

    prefixValue.addEventListener('input', ()=>{
        const label = prefixSelect.value;
        if(!label) return;
        const list = JSON.parse(localStorage.getItem('prefixList')||'{}');
        list[label] = prefixValue.value;
        localStorage.setItem('prefixList', JSON.stringify(list));
    });

    generateButton.addEventListener('click', ()=>{
        const prefix = prefixValue.value;
        const suffixArray = suffixInput.value.split(',').map(s=>s.trim()).filter(s=>s);
        generateList(prefix, suffixArray);
    });

    clearButton.addEventListener('click', ()=>{
        suffixInput.value=''; combinedArea.value=''; outputContainer.innerHTML='';
        showFeedback('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß');
    });
    clearSuffix.addEventListener('click', ()=>{ suffixInput.value=''; });

    combineButton.addEventListener('click', ()=>{
        const checked = Array.from(document.querySelectorAll('.selectCheckbox:checked')).map(cb=>cb.dataset.suffix);
        const prefix = prefixValue.value;
        if(checked.length===0){ showFeedback('‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡πà‡∏≠‡∏ô'); return; }
        combinedArea.value = prefix + ', ' + checked.join(', ');
        showFeedback('‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡πâ‡∏ß');
    });

    copyAllButton.addEventListener('click', ()=>{
        navigator.clipboard.writeText(combinedArea.value);
        showFeedback('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!');
    });

    function generateList(prefix, suffixArray){
        outputContainer.innerHTML='';
        suffixArray.forEach((suffix,index)=>{
            const itemDiv=document.createElement('div'); itemDiv.className='result-item';
            const checkbox=document.createElement('input');
            checkbox.type='checkbox'; checkbox.className='selectCheckbox'; checkbox.dataset.suffix=suffix;
            const indexSpan=document.createElement('span'); indexSpan.className='result-index'; indexSpan.textContent=(index+1)+'.';
            const textSpan=document.createElement('span'); textSpan.className='result-text'; textSpan.textContent=prefix+suffix;
            textSpan.addEventListener('click', ()=>{ textSpan.classList.toggle('strike'); });
            const copyBtn=document.createElement('button'); copyBtn.className='copy-button'; copyBtn.textContent='‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å';
            copyBtn.addEventListener('click', ()=>{
                navigator.clipboard.writeText(prefix+suffix).then(()=>{
                    textSpan.classList.add('strike');
                    showFeedback(`‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å "${prefix+suffix}" ‡πÅ‡∏•‡πâ‡∏ß!`);
                });
            });
            itemDiv.append(checkbox,indexSpan,textSpan,copyBtn);
            outputContainer.appendChild(itemDiv);
        });
    }

    function showFeedback(msg){
        if(feedbackTimeout) clearTimeout(feedbackTimeout);
        copyFeedback.textContent=msg;
        copyFeedback.style.display='block';
        feedbackTimeout=setTimeout(()=>{ copyFeedback.style.display='none'; },2000);
    }
});
</script>
</body>
</html>